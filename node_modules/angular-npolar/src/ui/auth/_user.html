<div class="login-logout">
  <div ng-show="security.isAuthenticated()" ng-init="user = security.getUser()">
    
    <button ng-click="logout()">Logout</button> <b>{{ user.name }}</b> (<a title="View profile for user {{user.username}}" ng-href="/user/{{user.username}}">{{ user.email }} </a>)
    
    <p>Login session expires {{ 1000*user.exp | date:'HH:mm' }}</p>
    
    <!--<section>
    <h2>Recent edits</h2>
    <dl ng-repeat="edit in edits">
      <dt>{{ edit.request.time }}</dt>
      <dd><a href="{{ edit.response.header.Location }}">{{ edit.response.header.Location }}</a></dd>
    </dl>
    </section>-->
    
    <section>
      <h2>Permissions</h2>
      <dl ng-repeat="system in user.systems">
        <dt>{{ system.uri }}</dt>
        <dd>{{ system.rights }}</dd>
      </dl>
    </section>
  </div>
  
  <div ng-show="security.notAuthenticated()">
    <h1>Login</h1>
    <form role="form">
      <section ng-show="true" ng-init="loginClicked = false;">
      <div>
        <label for="username">Username</label>
        <input type="text" ng-model="email" id="email" placeholder="Username (email)">
      </div>
      <div>
        <label for="password">Password</label>
        <input type="password" id="password" ng-model="password" placeholder="Password">
      </div>
      <button id="login2" type="submit" ng-click="login(email,password)">Login</button> 
      </section>
      <a ng-href="/user/reset?username={{user.username}}">Forgot password?</a> <a href="/user/register">Sign up</a></section>
    </form>
  </div>
</div>