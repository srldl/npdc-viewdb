!function(){"use strict";function e(e){return"number"==typeof e&&!isNaN(e)&&Math.abs(e)<1/0}function t(e,t){t=Object.assign({appendTo:null,context:document,html:"",insertAfter:null,insertBefore:null,replace:null},t);var n,a,o=e instanceof HTMLElement?e:null;if("string"==typeof e){a=function(e,t){return e.match(/(\[[^\]]+\]|#[^#.\[]+|\.[^#.\[]+|\w+)/g).forEach(function(e){"["==e[0]?(e=e.match(/^\[([^=\]]+)=?([^\]]+)?\]$/))&&(t.attribs[e[1]]=e[2]||""):"."==e[0]?t.classes.push(e.substr(1)):"#"==e[0]?t.attribs.id=e.substr(1):t.tag=e}),t}(e,{attribs:{},classes:[]}),o=t.context.createElement(a.tag),a.classes.forEach(function(e){o.classList.add(e)});for(n in a.attribs)a.attribs.hasOwnProperty(n)&&o.setAttribute(n,a.attribs[n])}return(this.element=o).innerHTML=t.html,this.parent=null,this.events={},t.replace?t.replace.parentNode.replaceChild(o,t.replace):t.appendTo?(this.parent=t.appendTo).element.appendChild(o):t.insertAfter?t.insertAfter.parentNode.insertBefore(o,t.insertAfter.nextSibling):t.insertBefore&&t.insertBefore.parentNode.insertBefore(o,t.insertBefore),this}function n(e){return{compare:function(t){var n,a=0,o=["getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds"];for(n in o){if(e[o[n]]()!=t[o[n]]())break;a=++n}return a},get days(){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},get firstDay(){return new Date(e.getFullYear(),e.getMonth(),1).getDay()},get week(){var t=new Date(e);return t.setHours(0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7)),Math.ceil(((t-new Date(t.getFullYear(),0,1))/864e5+1)/7)}}}function a(e,t,a){var o=e.getDate(),i=e.getMonth(),r=e.getFullYear(),s=e.getHours(),l=s%12||(a.zeroHour?0:12),c=e.getMinutes(),h=e.getSeconds(),d=n(e).week,u=e.getDay(),f=12>s?a.anteMeridiem:a.postMeridiem;return t.replace(/{date}/gi,a.formatDate).replace(/{datetime}/gi,a.formatDateTime).replace(/{isodate}/gi,"{YYYY}-{MM}-{DD}").replace(/{yearmonth}/gi,a.formatYearMonth).replace(/{ww}/gi,("0"+d).slice(-2)).replace(/{w}/gi,d).replace(/{DDDD}/g,a.dayOfWeek[u]).replace(/{DDD}/g,a.dayOfWeekShort[u]).replace(/{DD}/g,("0"+o).slice(-2)).replace(/{D}/g,o).replace(/{MMMM}/g,a.monthName[i]).replace(/{MMM}/g,a.monthNameShort[i]).replace(/{MM}/g,("0"+(i+1)).slice(-2)).replace(/{M}/g,i+1).replace(/{YYYY}/g,r).replace(/{YY}/g,r.toString().slice(-2)).replace(/{HH}/g,("0"+s).slice(-2)).replace(/{H}/g,s).replace(/{hh}/g,("0"+l).slice(-2)).replace(/{h}/g,l).replace(/{mm}/g,("0"+c).slice(-2)).replace(/{m}/g,c).replace(/{ss}/g,("0"+h).slice(-2)).replace(/{s}/g,h).replace(/{ap}/g,f)}function o(e,t){var a,o,i=n(new Date(e,t)).firstDay||7,r=new Date(e,t,1-(i-1||7)),s=[];for(a=0;6>a;++a)for(s.push([]),o=0;7>o;++o)s[a].push(new Date(r)),r.setDate(r.getDate()+1);return s}function i(e){var t,n,a=[];for(t=0;3>t;++t)for(a.push([]),n=0;4>n;++n)a[t].push(new Date(e,4*t+n));return a}function r(s,l){function c(t,a,o){for(var i,r,s=h.min,l=h.max;o>(i=n(new Date(t,a,o)).days);)++a,o-=o-i;for(;a>12;)++t,a-=12;if(isNaN(r=new Date(t,a-1,isNaN(o)?1:o))||(t=r.getFullYear(),a=r.getMonth()+1,o=r.getDate()),e(t)){if(e(s.year)&&t<s.year||e(l.year)&&t>l.year)return!1;if(e(a)){if(e(s.month)&&a<s.month&&t<=s.year||e(l.month)&&a>l.month&&t>=l.year)return!1;if(e(o)&&(e(s.day)&&o<s.day&&a<=s.month&&t<=s.year||e(l.day)&&o>l.day&&a>=l.month&&t>=l.year))return!1}}return!0}l=Object.assign({className:"chronopic",container:null,date:null,direction:"down",format:"{date}",locale:null,max:{year:2100},min:{year:1900},monthYearOnly:!1,onChange:null},l),this.container=l.container,this.direction=l.direction,this.format=l.format,this.instances=[],this.max="object"==typeof l.max?l.max:{},this.min="object"==typeof l.min?l.min:{},this.monthYearOnly=l.monthYearOnly===!0,this._i18n=r.i18n.en_GB;var h=this,d=new Date;l.date&&"object"==typeof(d=l.date)&&(d=d instanceof Date?new Date(d):new Date(d.year,d.month-1,d.day)),h.max instanceof Date&&(h.max={year:h.max.getFullYear(),month:h.max.getMonth()+1,day:h.max.getDate()}),h.min instanceof Date&&(h.min={year:h.min.getFullYear(),month:h.min.getMonth()+1,day:h.min.getDate()}),("string"==typeof s?[].slice.call(document.querySelectorAll(s)):[s]).forEach(function(s){if(s instanceof HTMLElement){r.instances.forEach(function(e){e.instances.forEach(function(e,t,n){e.element.element==s&&(e.element.on(["click","change","keydown"],null),n.splice(t,1))})});var h=s.nextSibling;"DIV"==h.tagName&&h.classList.contains(l.className)||(h=null);var u,f=l.className,m=new t("div."+f,{insertAfter:s,replace:h}),g=this,p={};["day","month"].forEach(function(e){m.add(p[e]=new t("table.hidden."+e)),p[e].head=new t("thead",{appendTo:p[e]}),p[e].body=new t("tbody",{appendTo:p[e]})}),g.instances.push(u={date:new Date(d),container:m,element:new t(s),selected:{},tables:p,value:"",visible:!1,get day(){return this.date.getDate()},set day(e){c(this.date.getFullYear(),this.date.getMonth()+1,e)&&(this.date.setDate(e),this.selected.day=new Date(this.date))},hide:function(){for(var e in p)p[e].classes.add("hidden");return this.visible=!1,this.selected.month=null,this.selected.day&&(this.date=new Date(this.selected.day),this.selected.month=new Date(this.date)),this},get hour(){return this.date.getHours()},set hour(e){this.date.setHours(e)},get minute(){return this.date.getMinutes()},set minute(e){this.date.setMinutes(e)},get month(){return this.date.getMonth()},set month(e){c(this.date.getFullYear(),e+1)&&(this.date.setMonth(e),this.selected.month=new Date(this.date))},rebuild:function(r){var s,l,h=this,d=h.selected,u=new Date,f=1;if(!r||"day"==r){for(h.tables.day.head.add([new t("tr.title").add([new t("th.prev[title="+g.locale.prevMonth+"]",{html:"&lt;"}).on("click",function(e){h.date.setDate(1),h.month--,h.show("day"),e.stopPropagation()}),new t("th[colspan=6][title="+g.locale.selectMonth+"]",{html:a(h.date,g.locale.titleMonth,g.locale)}).on("click",function(){h.show("month")}),new t("th.next[title="+g.locale.nextMonth+"]",{html:"&gt;"}).on("click",function(e){h.date.setDate(1),h.month++,h.show("day"),e.stopPropagation()})]),s=new t("tr.labels").add(new t("th.week",{html:g.locale.week}))],!0),l=0;7>l;++l)s.add(new t("th.day[title="+g.locale.dayOfWeek[f%7]+"]",{html:g.locale.dayOfWeekShort[f++%7]}));h.tables.day.body.clear(),o(h.year,h.month).forEach(function(e){var o=new t("tr",{appendTo:h.tables.day.body});o.add(new t("td.week",{html:n(e[0]).week})),e.forEach(function(e){var i,r=".day",s=e.getMonth()-h.month,l=!c(e.getFullYear(),e.getMonth()+1,e.getDate()),f=a(e,g.locale.titleDay,g.locale);(-1==s||11==s)&&(r+=".prev"),(1==s||-11==s)&&(r+=".next"),d.day&&n(d.day).compare(e)>=3&&(r+=".selected"),n(e).compare(u)>=3&&(r+=".now"),l&&(r+=".disabled",f+=" ("+g.locale.disabled+")"),o.add(i=new t("td[title="+f+"]"+r,{html:e.getDate()})),!l&&i.on("click",function(){h.month=e.getMonth(),h.day=e.getDate(),h.update().hide()})})})}return r&&"month"!=r||(h.tables.month.head.add([new t("tr.title").add([new t("th.prev[title="+g.locale.prevYear+"]",{html:"&lt;"}).on("click",function(e){h.year--,h.show("month"),e.stopPropagation()}),new t("th.year[colspan=6][title="+g.locale.year+"]").add(new t("input[type=number][step=1][min="+(g.min.year||0)+"][max="+(g.max.year||9999)+"][value="+h.year+"]").on("change",function(t,n){e(n=Number(t.target.value))&&(h.year=n,h.show("month"),h.container.element.querySelector(".year input").focus())})),new t("th.next[title="+g.locale.nextYear+"]",{html:"&gt;"}).on("click",function(e){h.year++,h.show("month"),e.stopPropagation()})])],!0),h.tables.month.body.clear(),i(h.year).forEach(function(e){var o=new t("tr",{appendTo:h.tables.month.body});e.forEach(function(e){var i,r=".month",s=e.getMonth(),l=!c(e.getFullYear(),s+1),f=a(e,g.locale.titleMonth,g.locale);d.month&&n(d.month).compare(e)>=2&&(r+=".selected"),l&&(r+=".disabled"),n(e).compare(u)>=2&&(r+=".now"),l&&(r+=".disabled",f+=" ("+g.locale.disabled+")"),o.add(i=new t("td[colspan=2][title="+f+"]"+r,{html:g.locale.monthNameShort[s]})),!l&&i.on("click",function(){h.date.setDate(1),h.month=s,g.monthYearOnly===!0?h.update().hide():h.show("day")})})})),this},get second(){return this.date.getSeconds()},set second(e){this.date.setSeconds(e)},show:function(e){e=g.monthYearOnly===!0?"month":e||"day",this.rebuild(e),this.visible=!0;var t,n,a,o,i,r,l={elem:this.container.element},c={elem:g.container instanceof HTMLElement?g.container:l.elem.parentNode},h={elem:s},d=g.direction;[l,c,h].forEach(function(e,t){var n=e.elem.getBoundingClientRect();e.h=e.elem.offsetHeight,e.w=e.elem.offsetWidth,e.abs={x:n.left,y:n.top},e.rel={x:e.elem.offsetLeft,y:e.elem.offsetTop}});for(t in p)p.hasOwnProperty(t)&&p[t].classes[t==e?"remove":"add"]("hidden"),l.h=Math.max(l.h,p[t].element.offsetHeight),l.w=Math.max(l.w,p[t].element.offsetWidth);n=h.rel.y-l.h+"px",a=h.rel.y+h.h+"px",o=c.h/2-l.h/2+"px",i=h.abs.y+h.h+l.h<c.abs.y+c.h,r=h.abs.y-l.h>c.abs.y,l.elem.style.top="down"==d?a:"up"==d?n:i?a:r?n:o,l.w==h.w||(l.elem.style.width=h.w+"px")},update:function(){return this.value=s.value=a(this.date,g.format,g._i18n),this.selected.day=new Date(this.date),"function"==typeof l.onChange&&l.onChange(s,this.date),this},get year(){return this.date.getFullYear()},set year(e){c(e)&&this.date.setFullYear(e)}}),l.date&&u.update()||(s.value=""),u.element.on("click",function(e){u[u.visible?"hide":"show"]()}).on("keydown",function(e){var t,n,o,i,r,s=e.keyCode,l=e.target.selectionStart;37>s||s>40||((r=function(e){var t,n=[],r=0;return g.format.match(/(\{[^}]*\}|[^{]+)/g).forEach(function(s,l,c){t=/^\{(.*)\}$/.test(s)?a(u.date,s,g._i18n):s,(l=n.length)&&(n[l-1].end=r),n.push({fmt:s,val:t,beg:r,end:e.length,field:s!=t}),s!=t&&(i=n[l])&&(o||(o=i)),r+=t.length}),n})(e.target.value).forEach(function(a,c,h){if(l<o.beg)l=o.beg,t=o.end;else if(l>i.beg)l=i.beg,t=i.end;else if(!t&&l>=a.beg&&l<a.end)if(a.field&&e.target.selectionEnd==l)l=a.beg,t=a.end;else if(37==s){for(;c&&!n;)(n=h[--c]).field?(l=n.beg,t=n.end):n=null;t||(t=o.end)}else if(39==s){for(;++c<h.length&&!n;)(n=h[c]).field?(l=n.beg,t=n.end):n=null;t||(t=i.end)}else if(38==s||40==s)if(a.field){var d=a.fmt,f=38==s?1:-1;/D{1,2}/.test(d)?u.day+=f:/M{1,4}/.test(d)?u.month+=f:/YY(YY)?/.test(d)?u.year+=f:/HH?/i.test(d)?u.hour+=f:/mm?/.test(d)?u.minute+=f:/ss?/.test(d)?u.second+=f:/ap/.test(d)&&(u.hour+=12*f),u.update(),u.visible&&u.show(),n=r(e.target.value)[c],l=n.beg,t=n.end}else for(;c&&!n;)(n=h[--c]).field?(l=n.beg,t=n.end):n=null}),e.preventDefault(),e.target.selectionStart=l,e.target.selectionEnd=t||l)}).on("change",function(t){var n,a,o,i,r,s,l,c=t.target.value,h=0,d=!0;return g.format.match(/(\{[^}]*\}|[^{]+)/g).forEach(function(e,t,u){if(d)if(/^\{(.*)\}$/.test(e)){var f=c.slice(h);++t<u.length&&(f=f.slice(0,f.search(u[t]))),h+=f.length,e=e.slice(1,-1),"DD"==e||"D"==e?n=Number(f):"MMMM"==e?(g._i18n.monthName.forEach(function(e,t){!a&&f==e&&(a=t+1)}),a||(d=!1)):"MMM"==e?(g._i18n.monthNameShort.forEach(function(e,t){!a&&f==e&&(a=t+1)}),a||(d=!1)):"MM"==e||"M"==e?a=Number(f):"YYYY"==e||"YY"==e?o=Number(f):"HH"==e||"H"==e||"hh"==e||"h"==e?i=Number(f):"mm"==e||"m"==e?r=Number(f):"s"==e||"s"==e?s=Number(f):"ap"==e?(l=f)!=g._i18n.anteMeridiem&&l!=g._i18n.postMeridiem&&(d=!1):d=!1}else c.substr(h,e.length)==e?h+=e.length:d=!1}),d?(e(s)&&(u.second=s),e(r)&&(u.minute=r),e(i)&&(u.hour=i),e(n)&&(u.day=n),e(a)&&(u.month=a-1),e(o)&&(u.year=o),u.update(),void(u.visible&&u.show())):void(t.target.value=u.value)}),document.addEventListener("click",function(e,t){for(;t=t?t.parentNode:e.target;)if(t==s||t==m.element)return;u.hide()})}},this),this.locale=l.locale||(navigator?(navigator.userLanguage||navigator.language).replace("-","_"):null),r.instances.push(this)}return"function"!=typeof Object.assign&&(Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");var t,n,a,o=Object(e);for(t=1;t<arguments.length;++t)if(void 0!==(n=arguments[t])&&null!==n)for(a in n)n.hasOwnProperty(a)&&(o[a]=n[a]);return o}),t.prototype={add:function(e,t){return t===!0&&this.clear(),(e instanceof Array?e:[e]).forEach(function(e){this.element.appendChild(e.element),e.parent=this},this),this},get classes(){return this.element.classList},clear:function(){for(var e,t=this.element;e=t.firstChild;)t.removeChild(e);return this},on:function(e,t){return(e instanceof Array?e:[e]).forEach(function(e){var n=this,a="function"==typeof t?function(e){return t.call(n,e)}:null;n.events[e]instanceof Array||(n.events[e]=[]),a?(n.events[e].push(a),n.element.addEventListener(e,a)):(n.events[e].forEach(function(t){n.element.removeEventListener(e,t)}),n.events[e]=[])},this),this}},r.VERSION=.43,r.instances=[],r.prototype={get direction(){return this._dir||"auto"},set direction(e){return-1!=["auto","down","up"].indexOf(e.toLowerCase())&&(this._dir=e.toLowerCase()),this.direction},get format(){switch(this._fmt){case"{date}":return this._i18n.formatDate;case"{datetime}":return this._i18n.formatDateTime;case"{yearmonth}":return this._i18n.formatYearMonth}return this._fmt||""},set format(e){this._fmt="string"==typeof e?e:""},get locale(){return this._i18n},set locale(e){r.i18n[e]&&r.i18n[e]!==this._i18n&&(this._i18n=r.i18n[e],this.instances.forEach(function(e){e.selected.day&&(e.day=e.date.getDate(),e.update()),e.rebuild()}))}},r.i18n={en_GB:{anteMeridiem:"㏂",dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],disabled:"disabled",formatDate:"{D} {MMMM} {YYYY}",formatDateTime:"{D} {MMMM} {YYYY}, {h}:{mm} {ap}",formatYearMonth:"{MMMM} {YYYY}",month:"Month",monthName:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNameShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],nextMonth:"Next month",nextYear:"Next year",postMeridiem:"㏘",prevMonth:"Previous month",prevYear:"Previous year",selectMonth:"Select month",titleDay:"{DDDD} {D} {MMMM} {YYYY}",titleMonth:"{MMMM} {YYYY}",week:"Week",year:"Year"}},"undefined"!=typeof window&&(window.addEventListener("resize",function(e){r.instances.forEach(function(e){e.instances.forEach(function(e){e.visible&&e.show()})})}),window.Chronopic=r),"object"==typeof module&&module.exports&&(module.exports=r),r}();